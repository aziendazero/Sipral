<div xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:s="http://jboss.com/products/seam/taglib" xmlns:rich="http://richfaces.org/rich" xmlns:a4j="http://richfaces.org/a4j" xmlns:jstl="http://java.sun.com/jstl/core" style="height:100%;width:100%;">
	<h1 id="formTitle">${msg.FormAddAlfrescoDoc}</h1>
	<div id="addNew" style="position:relative;" >
			<a4j:outputPanel layout="block" id="LayoutRowAddAlfrescoDoc" style="overflow:auto;" styleClass="layoutContainer layoutContainerVertical layoutRootVertical  layoutRoot" >
				<div class="layoutVertical" >
				<a4j:commandLink action="#{processManager.manageTask('Link_1493911862020;BtnAddAlfrescoDocCancel')}" status="ajaxStatus" id="Link_1493911862020" title="${msg.alt_Link_1493911862020}" immediate="true" reRender="phiDesktop" styleClass="fa fa-reply fa-3x link readOnly" />
				</div>

				<a4j:outputPanel layout="block" style="padding:0;" id="LayoutNewFromTemplate" styleClass="layoutContainer layoutContainerVertical" >
				<a4j:outputPanel layout="block" style="width:100%;height:100%" rendered="#{not AlfrescoDocumentAction.temporary.isTemplate}" >
				<fieldset class="layoutGroupBox" ><legend class="groupBoxLegend" >${msg.LayoutNewFromTemplate}</legend>
					<a4j:region>
					<a4j:status id="LayoutNewFromTemplateStatus" onstop="stopAjaxReq()"/>

					<a4j:outputPanel layout="block" id="LayoutRow_1487931862407" styleClass="layoutContainer layoutContainerVertical" >
						<div class="layoutHorizontal" >
						<label style="display:block;" >
							<span class="widget-label">${msg.label_TxtBxTmpltNme}</span>
							<h:inputText id="TxtBxTmpltNme" value="#{AlfrescoDocumentAction.like['name']}" styleClass="inputText" label="${msg.label_TxtBxTmpltNme}" />
							<a4j:outputPanel id="TxtBxTmpltNme_msg" styleClass="errorContainer" ><h:message for="TxtBxTmpltNme" styleClass="errorMessages TxtBxTmpltNme_E" /></a4j:outputPanel>
						</label>
						</div>

						<a4j:outputPanel layout="block" styleClass="layoutHorizontal" id="CmbBxTmpltTyp" >
						<label style="display:#{(!spisalUserAction.isArpav()) ? 'block' : 'none' };" >
							<span class="label">${msg.label_CmbBxTmpltTyp}</span>
							<h:selectOneMenu id="CmbBxTmpltTyp_id" value="#{AlfrescoDocumentAction.equal['type']}" rendered="#{!spisalUserAction.isArpav()}" styleClass="comboBox" label="${msg.label_CmbBxTmpltTyp}" >
								<f:selectItem itemLabel="-" itemValue=""/>
								<f:selectItems value="#{vocabularies.getIdValues('PHIDIC:ReportType')}" />
								<f:converter converterId="CodeValueConverter"/>
								<a4j:support limitToList="true" ajaxSingle="true" reRender="DgAlfrescoTemplate" event="onchange" action="#{AlfrescoDocumentAction.readTemplates()}" ignoreDupResponses="true" />
							</h:selectOneMenu>
						</label>
						</a4j:outputPanel>

						<a4j:outputPanel layout="block" styleClass="layoutHorizontal" id="ComboBox_1590176825807" >
						<label style="display:#{(spisalUserAction.isArpav()) ? 'block' : 'none' };" >
							<span class="label">${msg.label_ComboBox_1590176825807}</span>
							<h:selectOneMenu id="ComboBox_1590176825807_id" value="#{AlfrescoDocumentAction.equal['typeArpav']}" rendered="#{spisalUserAction.isArpav()}" styleClass="comboBox" label="${msg.label_ComboBox_1590176825807}" >
								<f:selectItem itemLabel="-" itemValue=""/>
								<f:selectItems value="#{vocabularies.getIdValues('PHIDIC:IMPTYPE')}" />
								<f:converter converterId="CodeValueConverter"/>
								<a4j:support limitToList="true" ajaxSingle="true" reRender="DgAlfrescoTemplate" event="onchange" action="#{AlfrescoDocumentAction.readTemplates()}" ignoreDupResponses="true" />
							</h:selectOneMenu>
						</label>
						</a4j:outputPanel>

						<div class="layoutHorizontal" >
						<a4j:commandLink action="#{processManager.manageTask('BtnTmpltSearch;BtnTmpltSearch')}" status="ajaxStatus" id="BtnTmpltSearch" alt="#{LINK}" reRender="phiDesktop" styleClass="fa fa-search fa-3x hotKeyF4 link" />
						</div>

					</a4j:outputPanel>
					<a4j:outputPanel id="DgAlfrescoTemplate" layout="block" styleClass="dt layoutTable layoutVertical" >#{AlfrescoDocumentTemplateAction.setReadPageSize(5)}
								<div class="paging">
									<ul>
										<li class="bk"><a4j:commandLink id="prevDgAlfrescoTemplate" value="&#8592;" action="#{AlfrescoDocumentTemplateList.prev}" reRender="DgAlfrescoTemplate" rendered="#{AlfrescoDocumentTemplateList.hasPrev()}" ajaxSingle="true" status="ajaxStatus" /></li>
										<a4j:repeat id="prDgAlfrescoTemplate" value="#{AlfrescoDocumentTemplateList.pageIndexes}" var="piDgAlfrescoTemplate">
											<li class="#{(AlfrescoDocumentTemplateList.currentPage eq piDgAlfrescoTemplate ? 'active' : '')}">
												<a4j:commandLink id="goToDgAlfrescoTemplate" value="#{piDgAlfrescoTemplate}" action="#{AlfrescoDocumentTemplateList.goToPage(piDgAlfrescoTemplate)}" reRender="DgAlfrescoTemplate" ajaxSingle="true" status="ajaxStatus" />
											</li>
										</a4j:repeat>
										<li class="fw"><a4j:commandLink id="nextDgAlfrescoTemplate" value="&#8594;" action="#{AlfrescoDocumentTemplateList.next}" reRender="DgAlfrescoTemplate" rendered="#{AlfrescoDocumentTemplateList.hasNext()}" ajaxSingle="true" status="ajaxStatus" /></li>
									</ul>
								</div>
						<table id="dDgAlfrescoTemplate" cellspacing="0" cellpadding="0" summary="${msg.DgAlfrescoTemplate} [AlfrescoDocumentTemplateList]" >
							<thead class="tableHeader">
								<tr>
									<th style="#{(Param['p.general.reportEditing'].visible ? '' : 'display:none;')}" class="sortableColumn">${msg.DataGridColumn_1478508695510} &#8593;&#8595;</th>
									<th class="sortableColumn">${msg.DataGridColumn_1478077184207} &#8593;&#8595;</th>
									<th><a4j:commandLink id="DgTmpltNm" value="${msg.DgTmpltNm} &#8593;&#8595;" action="#{AlfrescoDocumentTemplateList.orderBy('name')}" reRender="DgAlfrescoTemplate" ajaxSingle="true" disabled="#{empty AlfrescoDocumentTemplateList ? true : false}"/></th>
									<th><a4j:commandLink id="DgTmpltDsc" value="${msg.DgTmpltDsc} &#8593;&#8595;" action="#{AlfrescoDocumentTemplateList.orderBy('description')}" reRender="DgAlfrescoTemplate" ajaxSingle="true" disabled="#{empty AlfrescoDocumentTemplateList ? true : false}"/></th>
								</tr>
							</thead>
							<tbody class="tableBody selectable">
								<jstl:if test="#{empty AlfrescoDocumentTemplateList or AlfrescoDocumentTemplateList.isEmpty()}">
									<tr class="noresults">
										<td colspan="4">${error.emtpy_search_for_table}</td>
									</tr>
								</jstl:if>
								<a4j:repeat id="rDgAlfrescoTemplate" value="#{AlfrescoDocumentTemplateList.entities}" var="AlfrescoDocumentTemplate" rowKeyVar="rowIndex" >
									<tr id="#{rowIndex}" onclick="ieDgAlfrescoTemplate('row;RowTemplateSelected',this.id);" class="#{AlfrescoDocumentTemplateAction.getEntity().equals(AlfrescoDocumentTemplate) or AlfrescoDocumentTemplate.internalId != 0 and AlfrescoDocumentTemplateAction.entity.internalId.equals(AlfrescoDocumentTemplate.internalId) ? 'selRow' : ''}" >
										<td style="#{(Param['p.general.reportEditing'].visible ? '' : 'display:none;')} " >
											<a id="BtnWebOdfEditTemplate" onclick="stopPropagation(event);stopPropagation(event);alfresco.editReport('#{AlfrescoDocumentTemplate.internalId}')" title="${msg.alt_BtnWebOdfEditTemplate}" class="fa fa-pencil fa-3x tableButton" />

										</td>

										<td >
											<a4j:outputPanel layout="block" id="JwTmpltPrvw" >
												<script>
												var img = jQuery('#i\\:rDgAlfrescoTemplate\\:#{rowIndex}\\:ImgTmpltPrvw');
												var nodeRefUrl = '#{AlfrescoDocumentTemplate.nodeRefUrl}';
												if (nodeRefUrl != '') {
													img[0].src = alfresco.getThumbnailUrl(nodeRefUrl);
													img.on("click", function (e) {
														e.preventDefault();
														alfresco.openReport('#{AlfrescoDocumentTemplate.nodeRefUrl}');
													});
												} else {
													img.hide();
												}
												</script>
												
											</a4j:outputPanel>

											<h:graphicImage id="ImgTmpltPrvw" alt="PICTUREBOX"  />
										</td>

										<td >
											#{AlfrescoDocumentTemplate.name}
										</td>

										<td >
											#{AlfrescoDocumentTemplate.description}
										</td>

									</tr>
								</a4j:repeat>
							</tbody>
						</table>
					<a4j:jsFunction id="ieDgAlfrescoTemplate" name="ieDgAlfrescoTemplate" status="ajaxStatus" action="#{AlfrescoDocumentTemplateList.injectEject}" data="#{AlfrescoDocumentTemplateList.selectedIndex}" oncomplete="selRow(data, jQuery('#dDgAlfrescoTemplate'))" reRender="BtnAddAlfrescoTmplt,BtnAddAlfrescoDocOk,TxtAddAlfrescoDocName,TxtAddAlfrescoDocDesc,BtnAddAlfrescoBoundTmplt,BtnAddAlfrescoUnoundTmplt" limitToList="true" ajaxSingle="true">
						<a4j:actionparam name="mnemonicName" assignTo="#{AlfrescoDocumentTemplateList.mnemonicName}"/>
						<a4j:actionparam name="rowIndex" assignTo="#{AlfrescoDocumentTemplateList.selectedIndex}"/>
					</a4j:jsFunction>
					</a4j:outputPanel>

					</a4j:region>
				</fieldset>
				</a4j:outputPanel>
				</a4j:outputPanel>
				<a4j:outputPanel layout="block" id="LayoutAddAlfrescoDocDetails" styleClass="layoutContainer layoutContainerVertical layoutGroupBoxOuter" >
				<fieldset class="layoutGroupBox" ><legend class="groupBoxLegend" >${msg.LayoutAddAlfrescoDocDetails}</legend>
					<div class="layoutVertical" >
					<a4j:outputPanel layout="block" id="JollyWidget_1513096169496" style="height:100%;width:100%;" >
						<a4j:outputPanel layout="block" styleClass="layoutVertical" id="TxtAddAlfrescoDocName" >
						<label style="display:block;" >
							<span class="widget-label">${msg.label_TxtAddAlfrescoDocName}</span>
							<h:inputText id="TxtAddAlfrescoDocName_id" value="#{AlfrescoDocument.name}" styleClass="inputText layoutRequired" required="true" label="${msg.label_TxtAddAlfrescoDocName}" style="width:500px;">
								<!-- <f:validator validatorId="AlfrescoNameValidator"/> -->
								<f:validator validatorId="UniqueRecordValidator"/>
								<a4j:support event="onchange" ajaxSingle="true" ignoreDupResponses="true" />
							</h:inputText>
							<a4j:outputPanel id="TxtAddAlfrescoDocName_msg" styleClass="errorContainer" ><h:message for="TxtAddAlfrescoDocName_id" styleClass="errorMessages TxtAddAlfrescoDocName_E" /></a4j:outputPanel>
						</label>
						</a4j:outputPanel>
					</a4j:outputPanel>
					</div>

 
					<a4j:outputPanel layout="block" styleClass="layoutVertical inputArea" id="TxtAddAlfrescoDocDesc" >
					<label >
						<span class="label">${msg.label_TxtAddAlfrescoDocDesc}</span>
						<div>
						<h:inputTextarea id="TxtAddAlfrescoDocDesc_id" value="#{AlfrescoDocument.description}" label="${msg.label_TxtAddAlfrescoDocDesc}" >
							<f:validateLength minimum="0" maximum="255"/>
						</h:inputTextarea>
						</div>
					</label>
					<h:message style="float:left;" for="TxtAddAlfrescoDocDesc_id" styleClass="errorMessages TxtAddAlfrescoDocDesc_E" />
					</a4j:outputPanel>

				</fieldset>
				</a4j:outputPanel>
				<a4j:outputPanel layout="block" style="padding:0;text-align:center;" id="LayoutRow_1454924180583" styleClass="layoutContainer layoutContainerVertical" >
				<a4j:outputPanel layout="block" style="width:100%;height:100%" rendered="#{!spisalUserAction.isArpav()}" >
					<a4j:outputPanel layout="block" styleClass="layoutHorizontal" id="BtnAddAlfrescoDocOk" style="display:inline-block;float:none;vertical-align:top;" >
					<a4j:commandButton action="#{processManager.manageTask('BtnAddAlfrescoDocOk;BtnAddAlfrescoDocOk')}" value="#{msg.BtnAddAlfrescoDocOk}" id="BtnAddAlfrescoDocOk_id" status="ajaxStatus" styleClass="buttonGeneric buttonBase" rendered="#{empty AlfrescoDocumentTemplate}" reRender="phiDesktop, header, errorMenu" limitToList="true" />
					</a4j:outputPanel>

					<a4j:outputPanel layout="block" styleClass="layoutHorizontal" id="BtnAddAlfrescoTmplt" style="display:inline-block;float:none;vertical-align:top;" >
					<a4j:commandButton action="#{processManager.manageTask('BtnAddAlfrescoTmplt;BtnAddAlfrescoTmplt')}" value="#{msg.BtnAddAlfrescoTmplt}" id="BtnAddAlfrescoTmplt_id" status="ajaxStatus" styleClass="buttonGeneric buttonBase" rendered="#{not empty AlfrescoDocumentTemplate}" reRender="popup,phiDesktop, header, errorMenu" limitToList="true" />
					</a4j:outputPanel>

				</a4j:outputPanel>
				</a4j:outputPanel>
				<a4j:outputPanel layout="block" style="padding:0;text-align:center;" id="LayoutRow_1602659451469" styleClass="layoutContainer layoutContainerVertical" >
				<a4j:outputPanel layout="block" style="width:100%;height:100%" rendered="#{spisalUserAction.isArpav()}" >
					<a4j:outputPanel layout="block" styleClass="layoutHorizontal" id="BtnAddAlfrescoBoundTmplt" style="display:inline-block;float:none;vertical-align:top;" >
					<a4j:commandButton action="#{processManager.manageTask('BtnAddAlfrescoBoundTmplt;BtnAddAlfrescoTmplt')}" value="#{msg.BtnAddAlfrescoBoundTmplt}" id="BtnAddAlfrescoBoundTmplt_id" status="ajaxStatus" styleClass="buttonGeneric buttonBase" rendered="#{not empty AlfrescoDocumentTemplate and not empty VerificaImp}" reRender="popup,phiDesktop, header, errorMenu" limitToList="true" />
					</a4j:outputPanel>

					<a4j:outputPanel layout="block" styleClass="layoutHorizontal" id="BtnAddAlfrescoUnoundTmplt" style="display:inline-block;float:none;vertical-align:top;" >
					<a4j:commandButton action="#{processManager.manageTask('BtnAddAlfrescoUnoundTmplt;BtnAddAlfrescoTmplt')}" value="#{msg.BtnAddAlfrescoUnoundTmplt}" id="BtnAddAlfrescoUnoundTmplt_id" status="ajaxStatus" styleClass="buttonGeneric buttonBase" rendered="#{not empty AlfrescoDocumentTemplate}" reRender="popup,phiDesktop, header, errorMenu" limitToList="true" />
					</a4j:outputPanel>

				</a4j:outputPanel>
				</a4j:outputPanel>
			</a4j:outputPanel>
	</div>
	<script>focusFirstElement();</script>
</div>
